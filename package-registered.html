<!DOCTYPE html>
<html lang="zxx">
<style>

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f1f1f1;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  /*z-index: 1;*/
}

.dropdown-content a {
  color: black;
  padding: 6px;
  text-align: left;
  text-decoration: none;
  display: block;
}

.nav-item .nav-menu li a {
        color: black !important;
    }    

.login-text {
    font-size: 16px !important;
}

.login-form .group-input .gi-more label input:checked~span:after {
    border-color: white !important;
}

.card {
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19); 
    padding-top: 20px; 
    padding-bottom: 20px;
}

.line-bottom {
    height: 4px; 
    background-color: #008D50; 
    width: 70%; 
    margin-left: auto; 
    margin-right: auto;
}

.line-bottom-premium {
    height: 4px; 
    background-color: goldenrod; 
    width: 50%; 
    margin-left: auto; 
    margin-right: auto;
}

.text-package {
    padding-top: 40px; 
    margin-left: auto; 
    margin-right: auto;
}

.text-price {
    font-weight: bolder; 
    padding-bottom: 10px; 
    font-size: 20px;
}

.text-type {
    font-weight: bold; 
    font-size: 15px;
    padding-bottom: 10px;
}

.footer-stay {
     position: absolute;
     bottom: 0; 
     width: 100%;
}

.button-subscribe {
    background-color: #008D50 !important; 
    color: white !important; 
    width: 100% !important; 
    border-radius: 18px !important;
}

.button-subscribe-premium {
    background-color: goldenrod !important; 
    color: white !important; 
    width: 100% !important; 
    border-radius: 18px !important;
}

.footer-stay {
    position: absolute;
    bottom: 0;
    width: 100%;
}


html * {
    font-family: 'Roboto' !important;
}

i {
    font-family: "FontAwesome" !important;

    display: inline-block;
    font-style: normal;
    font-variant: normal;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  padding: 12px 16px;
  z-index: 1;
  font-size: small;
}

.dropdown:hover .dropdown-content {
  display: block;
}

.dropdown-content a:hover {
    color: #27AE60 ;
}
.hide-loader{
display:none;
}
</style>

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Fashi Template">
    <meta name="keywords" content="Fashi, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Waste 2 Wealth</title>
    <link rel="icon" type="image/png" sizes="16x16" href="img/website-logo.png">
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/themify-icons.css" type="text/css">
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Header Section Begin -->
    <div class="col-md-10 offset-md-1">
    <header class="header-section" style="margin-bottom: 50px !important">
        <div class="header-top">
        <div class="container">
            <div class="inner-header" style="padding: 0 !important; padding-top: 15px !important">
                <div class="row">
                    <div class="col-lg-2 col-md-2" style="padding: 0;">
                        <div class="logo">
                            <a href="./index1.html">
                                <img src="img/website-logo.png">
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-10 text-right" style="padding: 5px;">
                        <button onclick="window.location.href='./index1.html';" class="btn">Home</button>
                        <div class="dropdown">
                            <button class="btn" type="button" data-toggle="dropdown" style="padding: 30px;"><img href="#" src="img/user.svg">
                            <h5 style="margin-top: 8px; color: black;">My Account</h5>
                            </button>
                            <div class="dropdown-content">
                              <a href="./myaccount-defaultview.html">My account</a>
                              <a href="./index.html">Logout</a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        </div>

        <div class="nav-item">
            <div class="container" style="display: flex;">
                <nav class="nav-menu mobile-menu" style="margin-right: auto; margin-left: auto;">
                    <ul style="margin-bottom: 0px; margin-top: 0px;">
                        <li ><a href="./index1.html">Home</a></li>
                        <li><a href="./productlistings1-viewall.html">Listings</a></li>
                        <li><a href="./productwanted1-viewall.html">Demands</a></li>
                        <li class="active"><a href="./package-registered.html">Pricing</a></li>
                        <li><a href="./news-userview.html">News</a></li>
                        <li><a href="./enquiry-form-userview.html">Contact Us</a></li>
                    </ul>
                </nav>
                <div id="mobile-menu-wrap"></div>
            </div>
        </div>

    </header>
    <!-- Header End -->

    <div class="container" style="margin-bottom: 100px;">
        <div>
            <h2 class="text-center">Discover the package</h2>
        </div>
        <div class="row mx-auto" style="margin-top: 50px;">
            <div class="col-md-4 mx-auto" style="padding: 10px; border: 2px solid lightgray; border-bottom:2px solid black;">
                <a href="packageinfo-registered.html"><h4 style="text-align: center; color: lightgray; cursor: pointer;">Information</h4></a>
            </div>
            <div class="col-md-4 mx-auto" style="padding: 10px; border: 2px solid black; border-bottom: none;">
                <a href="#"><h4 style="text-align: center; cursor: pointer;">Ad Package</h4></a>
            </div>
            <div class="col-md-4 mx-auto" style="padding: 10px; border: 2px solid lightgray; border-bottom:2px solid black;">
                <a href="./packagetoken-registered.html"><h4 style="text-align: center; color: lightgray; cursor: pointer;">Token Package</h4></a>
            </div>
        </div>
        <div id="packagerow" class="row" style="margin-top: 50px;">         
            <!-- <div class="card col-md-2 mx-auto" style="background-color: #FAFAFA;">
                <div style="margin-left: auto; margin-right: auto;">
                    <div class="text-center" style="font-weight: bold;">Package A</div>
                    <div class="text-center" style="color: lightgray; font-style: italic;">(Regular)</div>
                    <h3 class="text-center" style="margin-top: 30px; font-weight: bold;">5 Token</h3>
                    <div class="line-bottom"></div>
                    <div class="text-center" style="margin-top: 30px;">3 months</div>
                    <button class="btn btn-success" style="width: 100%; margin-top: 30px;">BUY NOW</button>
                </div>
            </div>
            <div class="card col-md-2 mx-auto" style="background-color: #FAFAFA;">
                <div style="margin-left: auto; margin-right: auto;">
                    <div class="text-center" style="font-weight: bold;">Package A</div>
                    <div class="text-center" style="color: orange; font-style: italic;">(Premium)</div>
                    <h3 class="text-center" style="margin-top: 30px; font-weight: bold;">15 Token</h3>
                    <div class="line-bottom"></div>
                    <div class="text-center" style="margin-top: 30px;">3 months</div>
                    <button class="btn btn-success" style="width: 100%; margin-top: 30px;">BUY NOW</button>
                </div>
            </div>
            <div class="card col-md-2 mx-auto" style="background-color: #FAFAFA;">
                <div style="margin-left: auto; margin-right: auto;">
                    <div class="text-center" style="font-weight: bold;">Package A</div>
                    <div class="text-center" style="color: lightgray; font-style: italic;">(Regular)</div>
                    <h3 class="text-center" style="margin-top: 30px; font-weight: bold;">10 Token</h3>
                    <div class="line-bottom"></div>
                    <div class="text-center" style="margin-top: 30px;">3 months</div>
                    <button class="btn btn-success" style="width: 100%; margin-top: 30px;">BUY NOW</button>
                </div>
            </div>
            <div class="card col-md-2 mx-auto" style="background-color: #FAFAFA;">
                <div style="margin-left: auto; margin-right: auto;">
                    <div class="text-center" style="font-weight: bold;">Package A</div>
                    <div class="text-center" style="color: orange; font-style: italic;">(Premium)</div>
                    <h3 class="text-center" style="margin-top: 30px; font-weight: bold;">30 Token</h3>
                    <div class="line-bottom"></div>
                    <div class="text-center" style="margin-top: 30px;">3 months</div>
                    <button class="btn btn-success" style="width: 100%; margin-top: 30px;">BUY NOW</button>
                </div>
            </div> -->
        </div>
    </div>
</div>

<footer id="footer" class="footer-section" style="background-color: #3A595D;">
    <div class="container">
        <div class="row" style="padding-top: 5px;">
            <div class="col-lg-2 text-right">
                <a href="#" style="color: white;">Contact Us</a>
            </div>
            <div class="col-lg-4">
                <a href="#" style="color: white;">Terms and Conditions</a>
            </div>
            <div class="col-lg-5 text-right">
                <p style="color: white;"><i class="fa fa-copyright"></i>Prospect W2W. All rights reserved.</p>
            </div>
        </div>
    </div>
</footer>

<!-- buy package modal -->
<div class="modal fade" id="myModal2" role="dialog"  style="top: 10%; left: 4%;">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-body">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
          <div class="col-md-12" style="margin-top: 10px; text-align: left; font-weight: bold;" >
            Are you sure you want to buy this package?
          </div>

          <div class="col-md-12" style="margin-top: 50px; text-align: center;" >
            <button id="buy" class="btn" style="background-color: #EB9000; color: white; border-radius: 6px; width: 155px;" data-dismiss="modal" data-toggle="modal" data-target="packagemodal">BUY</button>
          </div>
  </div>
</div>
</div>
</div>

<!-- submitted package modal -->
<div class="modal fade" id="packagemodal" role="dialog"  style="top: 10%; left: 4%;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body" style="padding: 30px;">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
          <div style="font-size: 28px; font-weight: bold; margin-bottom: 30px;"></div>
         
          <div class="" style="margin-top: 40px; text-align: center;"> 
            <img src="./img/checkijau.svg">  
          </div>
          <div class="col-md-12" style="margin-top: 60px; text-align: center; font-weight: bold; font-size: 20px;" >
            You have purchased the package!
          </div>

          <div id="balance" class="col-md-12" style="margin-top: 30px; text-align: center; color: #707070;" >
            
          </div>

          <div class="col-md-12" style="margin-top: 30px; text-align: center;" >
            <button class="btn" style="background-color: #27AE60; color: white; border-radius: 6px; width: 155px;" data-toggle="modal" data-dismiss="modal">OKAY</button>
          </div>
  </div>
</div>
</div>
</div>

<!--reject_status-->
<div class="modal fade bd-example-modal-sm mx-auto"  style=" margin: 100px; margin-right: 60px;" id="reject_status" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
      
        <div class="modal-content" style="text-align: center; width: 130%; padding: 40px; border-radius: 10px;">
            <div class="modal-body mx-auto">
              <img src="img/rejected.svg">
            </div>
            <div class="mx-auto" style="margin: 10px; color: #F44336; font-size: 28px;">Existed package.</div>
          </div>
    </div>
</div>




        <!-- Js Plugins -->
        <script src="js/jquery-3.3.1.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/jquery-ui.min.js"></script>
        <script src="js/jquery.countdown.min.js"></script>
        <script src="js/jquery.nice-select.min.js"></script>
        <script src="js/jquery.zoom.min.js"></script>
        <script src="js/jquery.dd.min.js"></script>
        <script src="js/jquery.slicknav.js"></script>
        <script src="js/owl.carousel.min.js"></script>
        <script src="js/main.js"></script>
    </body>

    </html>

    <script
        src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
        crossorigin="anonymous">
        //required to run jquery library
        </script>

        <script>
            $(document).ready(function(){
                $userid = localStorage.getItem('user_id');
                $listpackage = [];
                $status = "yes";

                listofpackage();
                
                
                $('#packagerow').delegate('.btn', 'click', function() {
                    var id = $(this).parent().parent().data('id');
                    localStorage.setItem('package_id', id);
                    $packageid = localStorage.getItem('package_id');
                    validatepackage();
                    console.log(id);
                });

                $('#buy').on('click',function(){                  
                    if($status == "yes"){
                        console.log("buy");
                        buypackage();
                        $('#packagemodal').modal('toggle');
                    }
                    else{
                        console.log("cannot");  
                        $('#reject_status').modal('toggle');   
                    }               
                });
                
            });

            function listofpackage() {
                $.ajax({
                    url: "http://codeviable.com/w2w2/public/packages",
                    type: "GET",
                    success: function(response){
                        console.log(response)
                        var tr = "";
                        $.each(response,function(i,data){
                            if(response[i].premiumlist == "regular"){
                                tr += '<div data-id='+response[i].package_id+' class="card col-md-2 mx-auto" style="background-color: #FAFAFA;"><div id=' + response[i].package_name +' style="margin-left: auto; margin-right: auto;"><div class="text-center" style="font-weight: bold; text-transform: capitalize;">'+ response[i].package_name +'</div><div class="text-center" style="color: lightgray; font-style: italic;">(Regular)</div><h3 class="text-center" style="margin-top: 30px; font-weight: bold;">'+ response[i].package_price +' Token</h3><div class="line-bottom"></div><div class="text-center" style="margin-top: 30px;">'+ response[i].package_duration +' months</div><button id="buy_btn" class="btn" style="width: 100%; margin-top: 30px; font-size: 14px; border-radius: 30px; background-color: #008D50; color: white;" data-toggle="modal" data-dismiss="modal" data-target="#myModal2">BUY NOW</button></div></div>';
                            }
                            else if(response[i].premiumlist == "premium"){
                                tr += '<div data-id='+response[i].package_id+' class="card col-md-2 mx-auto" style="background-color: #FAFAFA;"><div id=' + response[i].package_name +' style="margin-left: auto; margin-right: auto;"><div class="text-center" style="font-weight: bold; text-transform: capitalize;">'+ response[i].package_name +'</div><div class="text-center" style="color: #FF7600; font-style: italic;">(Premium)</div><h3 class="text-center" style="margin-top: 30px; font-weight: bold;">'+ response[i].package_price +' Token</h3><div class="line-bottom"></div><div class="text-center" style="margin-top: 30px;">'+ response[i].package_duration +' months</div><button id="buy_btn" class="btn" style="width: 100%; margin-top: 30px; font-size: 14px; border-radius: 30px; background-color: #008D50; color: white;" data-toggle="modal" data-dismiss="modal" data-target="#myModal2">BUY NOW</button></div></div>';
                            }
                        });
                        $("#packagerow").html(tr);
                        $('.loader').addClass("hide-loader");  
                    }
                });
                
            }

            function buypackage() {

                $.ajax({
                    url : "http://codeviable.com/w2w2/public/user/addpackage?user_id=&package_id=",
                    type : "POST",
                    data : {"user_id":$userid , "package_id": $packageid}
                }).done(function(response){
                    userData();
                    console.log(response);
                });
            }

            function validatepackage() {

                $.ajax({
                    url : "http://codeviable.com/w2w2/public/paidpackage/user?user_id=",
                    type : "GET",
                    data : {"user_id":$userid}
                }).done(function(response){
                    console.log(response);
                    $listpackage = response;
                    // console.log($listpackage);

                   
                    $.each(response, function(i,data){
                    // for(var i = 0; i < $listpackage.length; i++){
                        if($packageid === response[i].package_id){
                            console.log(response[i].package_id);
                            console.log("existing package");
                            $status = "no";
                            return false;
                        }
                        else if($packageid !== response[i].package_id){
                            console.log($packageid);
                            console.log("you can buy");
                            $status = "yes";
                            return false;
                        }
                    // }
                    });

                    console.log($status)
                    
                })
            }

            function userData(){

                $.ajax({
                url: 'http://codeviable.com/w2w2/public/user/detail?user_id=',
                type: 'GET',
                data: { "user_id" : $userid },
                success: function(response){
                    $('#balance').html("Your remaining token is: "+response.balancetoken);
                }
                });
            }
        </script>


    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.countdown.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.zoom.min.js"></script>
    <script src="js/jquery.dd.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>
</body>

</html>