<!DOCTYPE html>
<html lang="zxx">
<style type="text/css">

.nav-item .nav-menu li a {
    color: black !important;
}

.footer-p{
    font-size: 12px;
}

.page-color {
    background-color: #FAFAFA;
}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f1f1f1;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  /*z-index: 1;*/
}

.dropdown-content a {
  color: black;
  padding: 6px;
  text-align: left;
  text-decoration: none;
  display: block;
}

.text-padding {
    margin-bottom: 20px;
    margin-top: 10px;
}

.line-bottom {
    height: 2px; 
    background-color: lightgray; 
    width: 100%; 
    margin-left: auto; 
    margin-right: auto;
    margin-top: 20px;
    margin-bottom: 20px;
}

.edit-text{
  font-size: 14px;
  color: #707070;
}

.ratenow-btn {
  background-color: #FF7600 !important;
  color: white !important;
  font-size: 14px !important;
}

html * {
    font-family: 'Roboto' !important;
}

i {
    font-family: "FontAwesome" !important;

    display: inline-block;
    font-style: normal;
    font-variant: normal;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
}

ul li a{
    color: black;
    font-weight: bold;
    font-size: 16px;
    line-height: 2.5;
}

.icon-menu {
    color: white;
}

ul li a:hover{
    color: #27AE60;
}

ul li a.active{
    color: #27AE60!important;
}

ul ul a {
  font-weight: normal;
}

.dropdown {
    position: relative;
    display: inline-block;
    }

    .dropdown-content {
    display: none;
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    padding: 12px 16px;
    z-index: 1;
    font-size: small;
    }

    .dropdown:hover .dropdown-content {
    display: block;
    }

    .dropdown-content a:hover {
    color: #27AE60 ;
    }
    .checked {
  color: orange;
}

/* Rating Star Widgets Style */
.rating-stars ul {
  list-style-type:none;
  padding:0;
  
  -moz-user-select:none;
  -webkit-user-select:none;
}
.rating-stars ul > li.star {
  display:inline-block;
  
}

/* Idle State of the stars */
.rating-stars ul > li.star > i.fa {
  font-size:2.5em; /* Change the size of the stars */
  color:#ccc; /* Color on idle state */
}

/* Hover state of the stars */
.rating-stars ul > li.star.hover > i.fa {
  color:#FFCC36;
}

/* Selected state of the stars */
.rating-stars ul > li.star.selected > i.fa {
  color:#FF912C;
}

.items-collection{
    margin:20px 0 0 0;
}
.items-collection label.btn-default.active{
    background-color:#007ba7;
    color:#FFF;
}
.items-collection label.btn-default{
    left: 15px;
    width:150px;
    font-size: 12px;
    margin: 2px;
    border-radius: 10px;
    color: gray; 
    background-color: #F2F2F2;
}
.items-collection label .itemcontent{
    width:100%;
}
.items-collection .btn-group{
    width:90%
}

input[type="checkbox"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}


</style>
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Fashi Template">
    <meta name="keywords" content="Fashi, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Waste 2 Wealth</title>
    <link rel="icon" type="image/png" sizes="16x16" href="img/website-logo.png">
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/themify-icons.css" type="text/css">
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Header Section Begin -->
  <div class="col-md-12 page-color">
    <div class="col-md-10 offset-md-1">
          <div class="header-top">
          <div class="container" style="padding: 0;">
              <div class="inner-header">
                  <div class="row">
                      <div class="col-lg-2 col-md-2" style="padding: 0;">
                          <div class="logo">
                              <a href="./index1.html">
                                  <img src="img/website-logo.png">
                              </a>
                          </div>
                      </div>
                      <div class="col-lg-6 col-md-6" style="padding: 20px;padding-left: 60px;">
                          <div class="advanced-search">
                              <button type="button" class="category-btn">Category</button>
                              <div class="input-group">
                                  <input type="text" placeholder="What are you looking for?">
                                  <button type="button"><i class="fa fa-search"></i>  Search  </button>
                              </div>
                          </div>
                      </div>
                      <div class="col-lg-4 text-right col-md-4" style="padding: 10px;">
                          <div class="dropdown">
                          <button class="btn"><a href="#"></a><img src="img/ukk.png"></button>
                            <div class="dropdown-content">
                              <a href="#">Link 1</a>
                              <a href="#">Link 2</a>
                              <a href="#">Link 3</a>
                            </div>
                          </div>
                          
                          <div class="dropdown">
                            <button class="btn" type="button" data-toggle="dropdown" style="padding: 10px;"><img href="#" src="img/User.png">
                            <h5 style="margin-top: 8px; color: black;">My Account</h5>
                            </button>
                            <div class="dropdown-content">
                              <a href="./myaccount-defaultview.html">My account</a>
                              <a href="./index.html">Logout</a>
                            </div>
                        </div>
                          <button onclick="window.location.href='./default-form-userview.html';" class="btn btn-warning">Submit Ad</button>
                      </div>
                  </div>
              </div>
          </div>
      </div>


    <div class="container" style="padding-top: 50px;">
      <div class="row">
          <div class="col-md-3" style="margin-top: 40px;">
            <div class="row">
            <div class="col-md-4">
              <img id="profilepicture" src="img/default-profile.png" alt="Avatar" style="width:300px; border-radius: 50%">
            </div>
            <div class="col-md-8">
              <div id="user_name" style="font-weight: bold; text-transform: capitalize;"></div>
              <!-- <span style='font-size:100px;'>&#9998;</span> -->
              <p style="cursor:pointer" onclick ="window.location.href='./myaccount-defaultview.html';">&#9998;  Edit profile</p>
            </div>
          </div>
            <div class="line-bottom"></div>
              <ul style="list-style-type: none;">
                  <li><a href="./myaccount-defaultview.html">My Account</a></li>
                  <li><a href="./myaccount-myproduct-adsubmitted.html">My Products</a></li>
                  <li><a href="./myaccount-mypurchase-purchasehistory.html"class="active">My Purchases</a>
                    <ul style="margin-top: 0;">
                      <a href="./myaccount-mypurchase-purchasehistory.html" class="active" >Purchase History</a>
                      <a href="./myaccount-mypurchase-reserveproduct.html">Reserve Product</a>
                    </ul>
                  </li>
                  <li><a href="./myaccount-notification.html">Notifications</a></li> 
                  <li><a href="./myaccount-reviewrating-product.html">Review & Ratings</a></li>
              </ul>
          </div>

          <div class="card col-md-8" style="padding: 40px; margin-bottom: 50px;">
            <div id="list">
                <!-- <div class="row">
                <div class="col-md-2">
                    <img src="img/organic-compose.jpg">
                </div>
                <div class="col-md-7">
                    <p style="font-weight: bold; color: #272727; margin-bottom: 10px;">Rate your experience upon your recent purchase</p>
                
                    <span style="color: #707070;">Please considering giving us your review. Let us know your opinions on our product or business. Thank you.</span>
                </div>
                <div class="col-md-3" style="margin-top: 15px;">
                    <div class="container">
                    <button type="button" class="btn ratenow-btn" data-toggle="modal" data-target="#myModal">
                        RATE NOW
                    </button>
                    <div class="modal" id="myModal">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div style="padding: 40px;">
                            <div class="text-center">How would you rate your experience?</div>
                            <div class="text-center" style="padding: 20px; font-weight: bold; font-size: 24px;">Great</div>
                            <div class="row d-flex justify-content-center" style="padding-bottom: 30px;">
                                <i style="padding: 5px; font-size: 20px;" class="fa fa-star checked"></i>
                                <i style="padding: 5px; font-size: 20px;" class="fa fa-star checked"></i>
                                <i style="padding: 5px; font-size: 20px;" class="fa fa-star checked"></i>
                                <i style="padding: 5px; font-size: 20px;" class="fa fa-star"></i>
                                <i style="padding: 5px; font-size: 20px;" class="fa fa-star"></i>
                            </div>
                            <div class="text-center" style="padding-bottom: 30px;">Satisfied making business? Let your seller know.</div>
                            <div class="row">
                            <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Excellent service</label>
                            <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Helpful seller</label>
                            <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Great personality</label>
                            </div>
                            <div class="row" style="padding-bottom: 30px;">
                                <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Friendly seller</label>
                                <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Good product quality</label>
                                <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Brilliant prices</label>
                                </div>
                                <textarea placeholder="Share your experience" class="form-control" style="width: 100%;"></textarea>
                                <button class="btn btn-success" style="width: 100%; margin-top: 20px;">Submit</button>
                            </div>
                        </div>
                        </div>
                    </div>
                    
                    </div>
                </div>
                </div> -->
            <!-- <div class="line-bottom"></div> -->
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="footer-section" style="background-color: #3A595D; margin-top: 15px;">
    <div class="container">
         <div class="row" style="padding-top: 5px;">
         <div class="col-lg-2 ">
             <a href="#" style="color: white;">Contact Us</a>
         </div>
         <div class="col-lg-6">
             <a href="#" style="color: white;">Terms and Conditions</a>
         </div>
         <div class="col-lg-4 text-right">
             <p style="color: white;"><i class="fa fa-copyright"></i> Prospect W2W. All rights reserved.</p>
         </div>
         </div>
     </div>
 </footer>

  <!-- rating modal -->
  <div class="modal" id="myModal">
    <div class="modal-dialog">
    <div class="modal-content">
        <div style="padding: 40px;">
        <div class="text-center">How would you rate your experience?</div>
        <div id="rating_status" class="text-center" style="padding: 20px; font-weight: bold; font-size: 24px;"></div>
        <div class="row d-flex justify-content-center" style="padding-bottom: 30px;">
            <!-- Rating Stars Box -->
            <div class='rating-stars text-center'>
              <ul id='stars'>
                <li class='star' data-value='1'>
                  <i class='fa fa-star fa-fw'></i>
                </li>
                <li class='star' data-value='2'>
                  <i class='fa fa-star fa-fw'></i>
                </li>
                <li class='star' data-value='3'>
                  <i class='fa fa-star fa-fw'></i>
                </li>
                <li class='star' data-value='4'>
                  <i class='fa fa-star fa-fw'></i>
                </li>
                <li class='star'  data-value='5'>
                  <i class='fa fa-star fa-fw'></i>
                </li>
              </ul>
            </div>
        </div>
        <div class="text-center">Satisfied making business? Let your seller know.</div>
        <div class="row">
          <div class="form-group ">
              <div id="review" class="items-collection row">
  
                  <div class="items ">
                      <div class="info-block block-info clearfix">
                          <div data-toggle="buttons" class="btn-group bizmoduleselect">
                              <label class="btn btn-default">
                                  <div class="itemcontent">
                                      <input type="checkbox" name="var_id[]" autocomplete="off" value="Excellent service" name="review">
                                      <span>Excellent service</span>
                                  </div>
                              </label>
                          </div>
                      </div>
                  </div>
                  <div class="items ">
                      <div class="info-block block-info clearfix">
                          <div data-toggle="buttons" class="btn-group itemcontent">
                              <label class="btn btn-default">
                                  <div class="itemcontent">
                                      <input type="checkbox" name="var_id[]" autocomplete="off" value="Helpful seller" name="review">
                                      <span>Helpful seller</span>
                                  </div>
                              </label>
                          </div>
                      </div>
                  </div>
                  <div class="items ">
                      <div class="info-block block-info clearfix">
                          <div data-toggle="buttons" class="btn-group itemcontent">
                              <label class="btn btn-default">
                                  <div class="itemcontent">
                                      <input type="checkbox" name="var_id[]" autocomplete="off" value="Great personality" name="review">
                                      <span>Great personality</span>
                                  </div>
                              </label>
                          </div>
                      </div>
                  </div>
                  <div class="items ">
                      <div class="info-block block-info clearfix">
                          <div data-toggle="buttons" class="btn-group itemcontent">
                              <label class="btn btn-default">
                                  <div class="itemcontent">
                                      <input type="checkbox" name="var_id[]" autocomplete="off" value="Friendly seller" name="review">
                                      <span>Friendly seller</span>
                                  </div>
                              </label>
                          </div>
                      </div>
                  </div>
                  <div class="items ">
                      <div class="info-block block-info clearfix">
                          <div data-toggle="buttons" class="btn-group itemcontent">
                              <label class="btn btn-default">
                                  <div class="itemcontent">
                                      <input type="checkbox" name="var_id[]" autocomplete="off" value="Good product quality" name="review">
                                      <span>Good product quality</span>
                                  </div>
                              </label>
                          </div>
                      </div>
                  </div>
                  <div class="items ">
                      <div class="info-block block-info clearfix">
                          <div data-toggle="buttons" class="btn-group itemcontent">
                              <label class="btn btn-default">
                                  <div class="itemcontent">
                                      <input type="checkbox" name="var_id[]" autocomplete="off" value="Brilliant prices" name="review">
                                      <span>Brilliant prices</span>
                                  </div>
                              </label>
                          </div>
                      </div>
                  </div>
  
              </div>
          </div>
      </div>
        <!-- <div class="row">
        <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Excellent service</label>
        <label type="button"style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Helpful seller</label>
        <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Great personality</label>
        </div> -->
        <!-- <div class="row" style="padding-bottom: 30px;">
            <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Friendly seller</label>
            <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Good product quality</label>
            <label style="color: gray; background-color: #F2F2F2; border-radius: 10px; padding: 5px; margin: 10px;">Brilliant prices</label>
          </div> -->
            <textarea id="description" placeholder="Share your experience" class="form-control" style="width: 100%;"></textarea>
            <button id="submit" class="btn btn-success" style="width: 100%; margin-top: 20px;" data-dismiss="modal" data-toggle="modal" data-target="#ratingmodal">Submit</button>
        </div>
    </div>
    </div>
    </div>

    <!-- submitted token modal -->
    <div class="modal fade" id="ratingmodal" role="dialog"  style="top: 10%; left: 4%;">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body" style="padding: 30px;">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
            <div style="font-size: 28px; font-weight: bold; margin-bottom: 30px;"></div>
          
            <div class="" style="margin-top: 40px; text-align: center;"> 
              <img src="./img/checkijau.svg">  
            </div>
            <div class="col-md-12" style="margin-top: 60px; text-align: center; font-weight: bold; font-size: 20px;" >
              Your review have been submitted!
            </div>

            <div class="col-md-12" style="margin-top: 30px; text-align: center; color: #707070;" >
              Thank you for your feedback.
            </div>

            <div class="col-md-12" style="margin-top: 30px; text-align: center;" >
              <a href="./myaccount-mypurchase-purchasehistory.html" style="color: #0099FF;">< — Back</a>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.countdown.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.zoom.min.js"></script>
    <script src="js/jquery.dd.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>

    <script src="https://code.jquery.com/jquery-3.4.1.js"
    integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous">
    </script>

    <script>

    $(document).ready(function(){

      $userid = localStorage.getItem("user_id");

      userData();
      purchasehistory();
      
      /* 1. Visualizing things on Hover - See next part for action on click */
      $('#stars li').on('mouseover', function(){
        var onStar = parseInt($(this).data('value'), 10); // The star currently mouse on
      
          // Now highlight all the stars that's not after the current hovered star
          $(this).parent().children('li.star').each(function(e){
            if (e < onStar) {
              $(this).addClass('hover');
            }
            else {
              $(this).removeClass('hover');
            }
          });
          
        }).on('mouseout', function(){
          $(this).parent().children('li.star').each(function(e){
            $(this).removeClass('hover');
          });
        });
      
      
      /* 2. Action to perform on click */
      $('#stars li').on('click', function(){
        var onStar = parseInt($(this).data('value'), 10); // The star currently selected
        var stars = $(this).parent().children('li.star');
        
        for (i = 0; i < stars.length; i++) {
          $(stars[i]).removeClass('selected');
        }
        
        for (i = 0; i < onStar; i++) {
          $(stars[i]).addClass('selected');
        }
        
        $ratingValue = parseInt($('#stars li.selected').last().data('value'), 10);

        if( $ratingValue == 1){
          $('#rating_status').html('Poor')
        }
        else if( $ratingValue == 2){
          $('#rating_status').html('Fair')
        }
        else if( $ratingValue == 3){
          $('#rating_status').html('Good')
        }
        else if( $ratingValue == 4){
          $('#rating_status').html('Great')
        }
        else if( $ratingValue == 5){
          $('#rating_status').html('Excellent')
        }
        console.log($ratingValue);

      });

      $("#submit").click(function () {
            $selected = new Array();
 
            $("#review input[type=checkbox]:checked").each(function () {
                $selected.push(this.value);
            });
 
            if ($selected.length > 0) {
                console.log("Selected values: " + $selected.join(","));
                console.log($selected);
                
            }          
            rate_review();
            
      });

    });

    function userData(){
      $.ajax({
        url: 'http://codeviable.com/w2w2/public/user/detail?user_id=',
            type: 'GET',
            data: { "user_id" : $userid },
            success: function(response){
                if(response.profilepicture !== "https://codeviable.com/w2w2/public/image/"){
                    $("#profilepicture").attr('src' , response.profilepicture);
                }
                $("#user_name").html(response.user_fname+" "+response.user_lname);
            }
      });
    }

    function purchasehistory() {
        $.ajax({
            url : "http://codeviable.com/w2w2/public/reserve/buyer?status=completed&buyer_id=",
            type : "GET",
            data : {"buyer_id" : $userid}
        }).done(function(response){

            var tr = "";

            $.each(response, function(i,data){
                tr += '<div data-product='+response[i].product_id+' data-buyer='+response[i].buyer_id+' class="row"><div class="col-md-2"><img src='+response[i].image[0].image+' style="width: 70px; height: 70px; object-fit: cover;"></div><div class="col-md-7"><p style="font-weight: bold; color: #272727; margin-bottom: 10px;">Rate your experience upon your recent purchase</p><span style="color: #707070; font-size: 14px;">Please considering giving us your review. Let us know your opinions on our product or business. Thank you.</span></div><div class="col-md-3" style="margin-top: 15px;"><div class="container"><button type="button" class="btn ratenow-btn" data-toggle="modal" data-target="#myModal">RATE NOW</button></div></div></div>';
                tr += '<div class="line-bottom"></div>';
            });

            $('#list').html(tr);

            $('#list').delegate('.ratenow-btn', 'click', function() {
              var id = $(this).parent().parent().parent().data('product');
              var buyer_id = $(this).parent().parent().parent().data('buyer');
              localStorage.setItem('rate_productID', id);
              localStorage.setItem('rate_buyerID', buyer_id);
              // console.log(buyer_id);
              sellerID();
            });
        })
    }

    function sellerID() {
      var id = localStorage.getItem('rate_productID');
      
      $.ajax({
        url : "http://codeviable.com/w2w2/public/product/detail?product_id=",
        type : "GET",
        data : { "product_id" : id }
      }).done(function(response){
        console.log(response);
        localStorage.setItem('rate_sellerID', response[0].user_id);
      })
    }

    function rate_review() {
      
      var product_id = localStorage.getItem('rate_productID');
      var seller_id = localStorage.getItem('rate_sellerID');
      var buyer_id = localStorage.getItem('rate_buyerID');
      var desc = $('#description').val();

      var postdata = {
        "buyer_id" : buyer_id,
        "product_id" : product_id,
        "user_id" : seller_id,
        "rating" : $ratingValue,
        "title" : $selected.join(","),
        "description" : desc
      }
        
      $.ajax({
        url : "http://codeviable.com/w2w2/public/review?user_id=&product_id=&title=&description=&rating=",
        type : "POST",
        data : postdata
      }).done(function(response){
        console.log(response);
        $('#ratingmodal').modal('toggle');
      })
    }

    </script>
</body>

</html>

